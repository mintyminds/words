<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>

<body>
	<div id="original"></div>
	<div id="translation"></div>
	<div id="button">Tap me!</div>

	<style>
		#original {
			font-size: 36px;
		}
		#button {
			width:200px;
			height:50px;
			background-color: #fdadfd;
			color: #fff;
			text-align: center;padding-top: 30px;
			margin-top: 40px;
		}
		.variant {
			height: 25px;
			padding-top: 6px;
			background-color: #bbc0f7;
			width: 300px;
			text-align: center;
			margin-top: 4px;
			color: #fff;
		}
	</style>
<script>
$(document).ready(function(){
    //DEFINING VARIABLES
	var words = new Array();
	var eng_words = new Array();
	var rus_words = new Array();

    //PARSING FILE WITH WORDS
    $.get('words.txt', function(data){
        words = data.split('\n');
        parse_words(words);
    });

    function parse_words(ar) {
    	for (var i=0; i<ar.length; i++){
    		var parts = ar[i].split(' -- ');
			var eng = parts[parts.length - 2];
			var rus = parts[parts.length - 1];

    		eng_words.push(eng);

    		if (rus.indexOf(',') !== -1){
        		rus_words.push(rus.substring(0, rus.indexOf(',')));  
    		} else if (rus.indexOf(' ') !== -1) {
    			rus_words.push(rus.substring(0, rus.indexOf(' ')));
    		} else {
    			rus_words.push(rus.substring(0, rus.length));
    		}
    		
    	}
    }

    //BUILDING QUESTIONS
    $('#button').click(function() {
    	build_question();
    	$('#button').fadeOut();

    	$('#correct').click(function() {
   			build_question();
   		});
    });

	function build_question() {
		var rand = Math.floor(Math.random() * eng_words.length);
    	var rand_1 = Math.floor(Math.random() * eng_words.length);
    	var rand_2 = Math.floor(Math.random() * eng_words.length);
    	var rand_3 = Math.floor(Math.random() * eng_words.length);

        var orig = eng_words[rand];
        
    	$('#original').text(orig);
    	
    	var ans_1 = '<div class="variant" id="correct">'+rus_words[rand]+'</div>';
    	var ans_2 = '<div class="variant">'+rus_words[rand_1]+'</div>';
    	var ans_3 = '<div class="variant">'+rus_words[rand_2]+'</div>';
    	var ans_4 = '<div class="variant">'+rus_words[rand_3]+'</div>';

    	var answers = [ans_1, ans_2, ans_3, ans_4];
    	shuffle(answers);

    	var translations = answers[0]+answers[1]+answers[2]+answers[3];

    	$('#translation').html(translations);
    	$('#correct').click(function() {
   			build_question();
   		});
	}

    //SHUFFLE ARRAY TO SHUFFLE VARIANTS
	function shuffle(array) {
  		var currentIndex = array.length, temporaryValue, randomIndex ;
		while (0 !== currentIndex) {

			randomIndex = Math.floor(Math.random() * currentIndex);
    		currentIndex -= 1;

    		temporaryValue = array[currentIndex];
    		array[currentIndex] = array[randomIndex];
    		array[randomIndex] = temporaryValue;
  		}
  		return array;
	}

});
</script>
</body>
</html>
